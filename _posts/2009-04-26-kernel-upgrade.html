---
layout: post
title: Kernel upgrade
categories:
- "サーバー管理"
tags: []
status: publish
type: post
published: true
meta:
  _edit_last: '3'
author:
  login: yokoshima
  email: k.yokoshima@gmail.com
  display_name: yokoshima
  first_name: ''
  last_name: ''
---
<p>自社で使用しているサーバーのカーネルのアップグレードをした。<br />
理由は、一つのサーバのNICがどうしても認識してくれないので、NICのドライバーの組み込みのついでにやってしまおうかと思ったから。</p>
<p>そのサーバーには、中古で購入したときからNICが2つあって、一つはマザーボード（GA-8IEXW）にくっついてるやつ、もう一つはIntelのEthernet Pro 100と書いてあるやつ。</p>
<p>どちらのIntel製なので、同じドライバを使っているのだろうが、どうもボードにくっついている方が全然認識していないみたいだった。そこでドライバを落としてきてインストールしようと思ったのだが、どうやらKernelのソースが必要(<a href="http://support.intel.co.jp/jp/support/network/adapter/pro100/linux_readme.htm">http://support.intel.co.jp/jp/support/network/adapter/pro100/linux_readme.htm)</a>みたいで、カーネルの再構築がめでたく必要になった。</p>
<p>せっかくなので、現在最新の2.6.29.1(<a href="http://kernel.org/">http://kernel.org/</a>)にしてみる。<br />
以下を参考にさせていただいた。</p>
<p><a href="http://piro791.blog.so-net.ne.jp/2008-12-26-1">http://piro791.blog.so-net.ne.jp/2008-12-26-1</a></p>
<p><a href="http://piro791.blog.so-net.ne.jp/2008-12-26-1"></a>最新にしてみたはいいものの、どうしてもファイアーウォール(iptables）の起動がうまくいかない。<br />
で必死にググってみたところ、以下サイトで同じような悩み発見。</p>
<p><a href="http://d.hatena.ne.jp/ryousanngata/20090407/1239082769">http://d.hatena.ne.jp/ryousanngata/20090407/1239082769</a></p>
<p><a href="http://d.hatena.ne.jp/ryousanngata/20090407/1239082769"></a>ここからのリンクの<a href="http://www.freewheelburning.com/linux/iptables2.html">カーネルに Netfilter 関連の機能を組み込み </a>を参照してまたまたリビルド（ていうか、一時間くらいはかかるんですけど・・・）</p>
<p>そしてiptablesの設定をしてみるが、どうも起動に失敗する。<br />
またまたググれば出てきました。<a href="http://d.hatena.ne.jp/ichikaway/20090217/1234877847"> カーネル再構築後にiptablesでエラー</a>。</p>
<p>そして今、リビルド中・・・。リビルドだけでほとんど時間を使ってしまったので続きはまた今度。</p>
