---
layout: post
title: "パリティビット"
categories:
- "開発"
tags:
- "パリティ"
- "パリティビット"
- "誤り検出"
status: publish
type: post
published: true
meta:
  _edit_last: '3'
author:
  login: yokoshima
  email: k.yokoshima@gmail.com
  display_name: yokoshima
  first_name: ''
  last_name: ''
---
<p>よくパソコンのメモリとかの裏に「パリティ有」とか書いてあったりします。<br />
昔から聞いたことがあった単語だったのですが、まあいいやと思っていたのですが、<br />
最近それを知る機会があったので、せっかくなのでメモしておきます。</p>
<p>まず<a href="http://ja.wikipedia.org/wiki/%E3%83%91%E3%83%AA%E3%83%86%E3%82%A3%E3%83%93%E3%83%83%E3%83%88">Wikpediaの記載</a>によると、</p>
<blockquote><p>パリティビット(parity bit)は、コンピュータと通信において、与えられた二進数に対して全体の奇偶性を保つために与えられる一桁の二進数(つまり 0 か 1)である。パリティビットは最も単純な誤り検出符号である。</p></blockquote>
<p>もうこの時点で意味がわかんない。「奇遇性」ってヒマがあれば追ってみるけど別にいいやと思っちゃいますね普通。</p>
<p>パリティチェックの基本については、以下ページがすごく参考になりました。<br />
通信基本用語 - 誤り制御 | LINEEYE<br />
<a href="http://www.lineeye.co.jp/html/term_ayamari.html">http://www.lineeye.co.jp/html/term_ayamari.html</a><br />
エラー制御<br />
<a href="http://www.asahi-net.or.jp/~ax2s-kmtn/error.html">http://www.asahi-net.or.jp/~ax2s-kmtn/error.html</a></p>
<p>まずこれは、あるデータを通信する場合に、そのデータが正常なものなのかをやんわりと検証するためのものです。<br />
送信側は知っていても、受信側は受信するだけで、それが正しいのかどうかはわかりません。</p>
<p>なので、送信するデータを元に、明白な計算結果を一緒につけてあげるのがパリティビットの役割です。</p>
<p>たとえば、「A」も文字コードは10進数で「65」で、1バイトで表現できます。<br />
これを2進数に変換すると「01000001」になります。</p>
<p>パリティビットのルールは、送信側と受信側で決めておくことが出来ますが、たとえばパリティビットは偶数です、と決めたとすると、<br />
上記の「01000001」の中の1の数が偶数であれば、最後に「0」を付与して送信します。<br />
（パリティビットは奇数です、と決めた場合は、パリティビットを合わせた1の数が奇数になるように送信側で調整します。）</p>
<p>受信側は、010000001と「0」をあわせて受信しており、1の数がちゃんと偶数であればOKとします。<br />
途中、通信状態によりどこかのビットが反転（0が1、1が0）になった場合には全体として偶数にならないのでエラーを検出できます。<br />
ただし、この場合はたまたま2つのビットが反転した場合にはエラー検出できません。<br />
全体として奇数か偶数かしかわからないので。これを垂直パリティ方式と言います。<br />
これがWikpediaの「奇遇性」と言うことなんだろうな。</p>
<p>そこで、1キャラクタだけではなく、ある単位でパリティビットを与えて、それがどうなのかを計算する方法があります。<br />
それが水平パリティ方式と言うことになります。</p>
<p>たとえば、「ABCD」と言うデータがあったとしたら、これを2進数にしてリストすると、<br />
A:01000001<br />
B:01000010<br />
C:01000011<br />
D:01000100</p>
<p>となります。これの垂直パリティビットは、偶数パリティの場合は「0010」になりますが、これのタテのパリティビットも算出して送ります。<br />
これをBlockCheckCharacter(BCC）と言うそうですが、以下のようになります。</p>
<p>A:01000001 0<br />
B:01000010 0<br />
C:01000011 1<br />
D:01000100 0<br />
--------------<br />
   00000100 1</p>
<p>これで、垂直パリティと組み合わせると、多少はエラー検出率があげることが出来ます。<br />
ただ、これはほんとに低レイヤーの処理の話ですなぁ。</p>
